<!DOCTYPE html>
<html>
<head>
  <title>2D Run Game</title>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>
</head>
<body>
  <div id="status">初期化中...</div>
  
  <script>
    async function startGame() {
      const status = document.getElementById('status');
      
      try {
        // 1. Pyodide初期化
        status.textContent = "Python環境を準備中...";
        const pyodide = await loadPyodide({
          indexURL: "https://cdn.jsdelivr.net/pyodide/v0.25.0/full/"
        });

        // 2. 必須パッケージロード
        status.textContent = "依存パッケージをインストール中...";
        await pyodide.loadPackage(["numpy"]);
        
        // 3. Pygameのカスタムビルドをロード
        status.textContent = "Pygameをロード中...（数分かかります）";
        await pyodide.loadPackage(
          "https://github.com/pygame-web/pygame-web/releases/download/v2.5.2/Pygame-2.5.2-cp311-wasm32.whl"
        );

        // 4. ゲームコード実行
        status.textContent = "ゲームを起動中...";
        await pyodide.runPythonAsync(`
          import pygame
          pygame.init()
          print("Pygameが正常にインポートされました！")
          
          # ここにゲームコードを貼り付け
        `);
        
        status.style.display = "none";
      } catch (e) {
        status.innerHTML = `エラー:<br>${e}`;
      }
    }
    
    startGame();
  </script>
</body>
</html>
